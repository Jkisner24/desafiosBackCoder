<header>
    <h1 class="bg-primary text-center mb-2 p-3">Listado de Productos</h1>
    <nav class="navbar d-flex flex-column mb-4">
        <div class="font-weight-bold text-decoration-none align-self-start">
            {{#if logged}}
            <a href="/api/views/session/login">
                <button>Login</button>
            </a>
            <a href="/api/views/session/register">Register</a>
            {{else}}
            <div class="me-auto mt-2 user-info">
                <span class="navbar-brand">Welcome: 
                    {{first_name}}
                    {{last_name}}
                    <br>
                    Your rol is:
                    {{role}}</span>
                    </div>
            <a href="/api/views/session/profile">
                <button>Profile</button>
            </a>
            <a href="/api/views/carts/{{this.idCart}}">
                <button>Cart</button>
            </a>
            <form action="/api/views/session/logout" method="post">
                <button>Log Out</button>
            </form>
            {{/if}}
        </div>
    </nav>
</header>
<div class="m-2 d-flex justify-content-between">
    {{#each products}}
    <div class="card" style="width: 14rem;height: auto;">
        <img src={{this.thumbnail}} class="card-img-top max-width: 100%" alt={{this.title}}>
        <div class="card-body">
            <p class="card-text">{{this.title}}</p>
            <a href="/api/views/products/{{this._id}}">Details</a></h5>
            <p class="card-text">{{this.description}}</p>
            <p class="card-text">Stock: {{this.stock}}</p>
            <p class="card-text">Price: {{this.price}}</p>
            <a href="/api/views/products/{{this._id}}" class="btn btn-primary">Buy!
            </a>
        </div>
    </div>
    {{/each}}
</div>
<br />
<section class="container-fluid boxProducts">
    <nav aria-label="Page navigation">
        <ul class="pagination">
{{#if hasPrevPage}}
    <li class="page-item">
        <a class="page-link" href="/api/views/products?page={{prevPage}}&sort={{sort}}"> Prev Page </a>
    </li>
{{/if}}
{{#if totalPages}}
    <li class="page-item"><a class="page-link" href="/api/views/products?page={{page}}&sort={{sort}}"> {{page}} </a></li>
{{/if}}
{{#if hasNextPage}}
    <li class="page-item">
        <a class="page-link" href="/api/views/products?page={{nextPage}}&sort={{sort}}"> Next </a>
    </li>
{{/if}}
        </ul>
    </nav>
</section>
<script src="/static/js/index.js"></script>